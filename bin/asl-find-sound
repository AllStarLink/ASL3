#!/usr/bin/bash

USBROOT=/sys/bus/usb/devices

ls $USBROOT | while read DEV 
do
	USBDEV="$USBROOT/$DEV"
	if [ -f $USBDEV/manufacturer ] && `grep -q -E "USB.*(ound|udio)" $USBDEV/product`; then
			cd $USBROOT
			MANF=`cat $USBDEV/manufacturer`
			IDPROD=`cat $USBDEV/idProduct`
			IDVEND=`cat $USBDEV/idVendor`
			for SUBDEV in `ls -d ${DEV}*`
			do
				USBSUBDEV="$USBDEV/$SUBDEV"
				if [ -d $USBSUBDEV/sound ]; then
					CHANUSB=$SUBDEV
				fi
			done
			printf "%s\t-->\t%s:%s %s\n" $CHANUSB $IDVEND $IDPROD "$MANF"
	fi
done
